var c=Object.defineProperty;var a=(i,e,t)=>e in i?c(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>(a(i,typeof e!="symbol"?e+"":e,t),t);let l=0;const h=(i,e)=>(...t)=>{clearTimeout(l),l=setTimeout(()=>i(...t),e)};class d{constructor(e){s(this,"rootEl");s(this,"dropdown");s(this,"dropdownSearch");s(this,"dropdownOptions",new Map);s(this,"uiBox");s(this,"placeholder");s(this,"valueLabel");s(this,"select");s(this,"current");s(this,"init",()=>{this.populateDropdown(),this.uiBox.addEventListener("click",()=>this.toggle()),document.addEventListener("click",e=>{this.rootEl.contains(e.target)||this.close()}),document.addEventListener("keyup",e=>{e.key==="Escape"&&this.close()}),this.dropdownSearch.addEventListener("input",()=>h(this.search,250)()),this.dropdown.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("ss-remove-icon")){this.onOptionSelected(this.emptyValue),this.close();return}const n=t.closest(".ss-option");n!==null&&(this.onOptionSelected(n.getAttribute("data-key")),this.close())}),this.select.addEventListener("change",this.update),this.update(),this.initLivewire()});s(this,"initLivewire",()=>{if(this.rootEl.hasAttribute("data-livewire"),!this.rootEl.hasAttribute("data-livewire")){window.Livewire&&console.info("[SearchSelect] Be sure to include the livewire attribute when rendering inside a Livewire component");return}if(!window.Livewire){console.error("MISSING LIVEWIRE GLOBAL OBJECT!");return}window.Livewire.hook("morph.updated",({el:e})=>this.onLivewireUpdate(e)),window.Livewire.hook("element.init",({el:e})=>setTimeout(()=>this.onLivewireUpdate(e),50))});s(this,"open",()=>{this.dropdown.classList.remove("hidden"),this.dropdownSearch.focus()});s(this,"close",()=>{this.dropdown.classList.add("hidden"),this.dropdownSearch.value="",this.dropdownSearch.dispatchEvent(new Event("input"))});s(this,"toggle",()=>{this.dropdown.classList.contains("hidden")?this.open():this.close()});s(this,"search",()=>{const e=this.dropdownSearch.value;for(const[,t]of this.dropdownOptions)e===""||t.innerText.includes(e)?t.classList.remove("hidden"):t.classList.add("hidden")});s(this,"populateDropdown",()=>{const e=new Set(this.dropdownOptions.keys()),t=this.rootEl.querySelector(".ss-option-template"),n=this.dropdown.querySelector(".ss-options");this.select.querySelectorAll("option").forEach(o=>{if(o.value===this.emptyValue)return;if(this.dropdownOptions.has(o.value)){e.delete(o.value),this.dropdownOptions.get(o.value).querySelector("span").innerText=o.innerText;return}const r=t.content.cloneNode(!0).firstElementChild;r.setAttribute("data-key",o.value),r.querySelector("span").innerText=o.label,n.appendChild(r),this.dropdownOptions.set(o.value,r)}),e.forEach(o=>{var r;(r=this.dropdownOptions.get(o))==null||r.remove(),this.dropdownOptions.delete(o)})});s(this,"onOptionSelected",e=>{e==null&&(e=this.emptyValue),this.select.value=e,this.select.dispatchEvent(new Event("change"))});s(this,"update",()=>{this.current=this.select.value,this.dropdown.querySelectorAll(".ss-option.selected").forEach(t=>t.classList.remove("selected"));let e="";if(this.current!==this.emptyValue){const t=this.dropdownOptions.get(this.current);t&&(t.classList.add("selected"),e=t.innerText??"")}e!==""?(this.valueLabel.innerHTML=e,this.valueLabel.style.display="block",this.placeholder.style.display="none"):(this.placeholder.style.display="block",this.valueLabel.style.display="none")});this.rootEl=e,this.dropdown=e.querySelector(".ss-dropdown"),this.dropdownSearch=this.dropdown.querySelector(".ss-dropdown-search input"),this.uiBox=e.querySelector(".ss-box"),this.placeholder=this.uiBox.querySelector(".ss-placeholder"),this.valueLabel=this.uiBox.querySelector(".ss-value-label"),this.select=e.querySelector(".ss-ghost-select"),this.current=this.select.value,this.init()}get emptyValue(){return this.select.firstElementChild.value}onLivewireUpdate(e){e===this.select&&(this.current!==this.select.value&&this.update(),setTimeout(()=>this.populateDropdown(),50))}}document.querySelectorAll("div.ss-wrapper").forEach(i=>new d(i));const p=new MutationObserver(function(i){i.forEach(function(e){console.log(e),e.addedNodes.forEach(function(t){t.nodeType===1&&t.querySelectorAll("div.ss-wrapper").forEach(n=>new d(n))})})});p.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1});
